{"version":3,"sources":["../../../javascript/src/selection.js"],"names":[],"mappings":";;;;;QAAgB,G,GAAA,G;QA0CA,M,GAAA,M;QA+BA,M,GAAA,M;AAzET,SAAS,GAAT,CAAa,KAAb,EAAoB,IAApB,EAA0B;AAC/B,MAAI,CAAC,IAAD,IAAS,KAAK,MAAL,KAAgB,CAA7B,EAAgC;AAC9B;AACA,WAAO,IAAP;AACD;;AAED,MAAI,MAAM,MAAM,GAAN,CAAU,WAAV,EAAuB,GAAvB,EAAV;;AAEA,MAAI,CAAC,GAAL,EAAU;AACR;AACA;AACA,UAAM,EAAN;AACD;;AAED,MAAI,SAAS,IAAI,KAAJ,CAAU,CAAV,CAAb;;AAEA;AACA,MAAI,SAAS,EAAb;AACA,OAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAAK,MAAzB,EAAiC,GAAjC,EAAsC;AACpC,WAAO,KAAK,CAAL,CAAP,IAAkB,IAAlB;AACD;;AAED;AACA,OAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,IAAI,MAAxB,EAAgC,GAAhC,EAAqC;AACnC,WAAO,OAAO,IAAI,CAAJ,CAAP,CAAP;AACD;;AAED,MAAI,UAAU,KAAd;AACA;AACA,OAAK,IAAI,GAAT,IAAgB,MAAhB,EAAwB;AACtB,cAAU,IAAV;AACA,QAAI,OAAO,cAAP,CAAsB,GAAtB,CAAJ,EACE,OAAO,IAAP,CAAY,GAAZ;AACH;;AAED,MAAI,OAAJ,EAAa;AACX,UAAM,GAAN,CAAU,WAAV,EAAuB,GAAvB,CAA2B,MAA3B;AACD;;AAED,SAAO,IAAP;AACD;;AAEM,SAAS,MAAT,CAAgB,KAAhB,EAAuB,IAAvB,EAA6B;AAClC,MAAI,CAAC,IAAD,IAAS,KAAK,MAAL,KAAgB,CAA7B,EAAgC;AAC9B;AACA,WAAO,IAAP;AACD;;AAED,MAAI,MAAM,MAAM,GAAN,CAAU,WAAV,EAAuB,GAAvB,EAAV;;AAEA,MAAI,SAAS,EAAb;AACA,OAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAAK,MAAzB,EAAiC,GAAjC,EAAsC;AACpC,WAAO,KAAK,CAAL,CAAP,IAAkB,IAAlB;AACD;;AAED,MAAI,UAAU,KAAd;AACA,MAAI,SAAS,EAAb;AACA,OAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,IAAI,MAAxB,EAAgC,GAAhC,EAAqC;AACnC,QAAI,CAAC,OAAO,cAAP,CAAsB,IAAI,CAAJ,CAAtB,CAAL,EAAoC;AAClC,aAAO,IAAP,CAAY,IAAI,CAAJ,CAAZ;AACD,KAFD,MAEO;AACL,gBAAU,IAAV;AACD;AACF;;AAED;AACA,MAAI,OAAJ,EAAa;AACX,UAAM,GAAN,CAAU,WAAV,EAAuB,GAAvB,CAA2B,MAA3B;AACD;;AAED,SAAO,IAAP;AACD;;AAEM,SAAS,MAAT,CAAgB,KAAhB,EAAuB,IAAvB,EAA6B;AAClC,MAAI,CAAC,IAAD,IAAS,KAAK,MAAL,KAAgB,CAA7B,EAAgC;AAC9B;AACA,WAAO,IAAP;AACD;;AAED,MAAI,MAAM,MAAM,GAAN,CAAU,WAAV,EAAuB,GAAvB,EAAV;;AAEA,MAAI,SAAS,EAAb;AACA,OAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAAK,MAAzB,EAAiC,GAAjC,EAAsC;AACpC,WAAO,KAAK,CAAL,CAAP,IAAkB,IAAlB;AACD;;AAED,MAAI,SAAS,EAAb;AACA,OAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,IAAI,MAAxB,EAAgC,GAAhC,EAAqC;AACnC,QAAI,CAAC,OAAO,cAAP,CAAsB,IAAI,CAAJ,CAAtB,CAAL,EAAoC;AAClC,aAAO,IAAP,CAAY,IAAI,CAAJ,CAAZ;AACD,KAFD,MAEO;AACL,aAAO,IAAI,CAAJ,CAAP,IAAiB,KAAjB;AACD;AACF;;AAED,OAAK,IAAI,GAAT,IAAgB,MAAhB,EAAwB;AACtB,QAAI,OAAO,GAAP,CAAJ,EAAiB;AACf,aAAO,IAAP,CAAY,GAAZ;AACD;AACF;;AAED,QAAM,GAAN,CAAU,WAAV,EAAuB,GAAvB,CAA2B,MAA3B;AACA,SAAO,IAAP;AACD","file":"selection.js","sourcesContent":["export function add(group, keys) {\n  if (!keys || keys.length === 0) {\n    // Nothing to do\n    return this;\n  }\n\n  var sel = group.var(\"selection\").get();\n\n  if (!sel) {\n    // No keys to keep, but go through the machinery below anyway,\n    // to remove dupes in `keys`\n    sel = [];\n  }\n\n  var result = sel.slice(0);\n\n  // Populate an object with the keys to add\n  var keySet = {};\n  for (var i = 0; i < keys.length; i++) {\n    keySet[keys[i]] = true;\n  }\n\n  // Remove any keys that are already in the set\n  for (var j = 0; j < sel.length; j++) {\n    delete keySet[sel[j]];\n  }\n\n  var anyKeys = false;\n  // Add the remaining keys\n  for (var key in keySet) {\n    anyKeys = true;\n    if (keySet.hasOwnProperty(key))\n      result.push(key);\n  }\n\n  if (anyKeys) {\n    group.var(\"selection\").set(result);\n  }\n\n  return this;\n}\n\nexport function remove(group, keys) {\n  if (!keys || keys.length === 0) {\n    // Nothing to do\n    return this;\n  }\n\n  var sel = group.var(\"selection\").get();\n\n  var keySet = {};\n  for (var i = 0; i < keys.length; i++) {\n    keySet[keys[i]] = true;\n  }\n\n  var anyKeys = false;\n  var result = [];\n  for (var j = 0; j < sel.length; j++) {\n    if (!keySet.hasOwnProperty(sel[j])) {\n      result.push(sel[j]);\n    } else {\n      anyKeys = true;\n    }\n  }\n\n  // Only set the selection if values actually changed\n  if (anyKeys) {\n    group.var(\"selection\").set(result);\n  }\n\n  return this;\n}\n\nexport function toggle(group, keys) {\n  if (!keys || keys.length === 0) {\n    // Nothing to do\n    return this;\n  }\n\n  var sel = group.var(\"selection\").get();\n\n  var keySet = {};\n  for (var i = 0; i < keys.length; i++) {\n    keySet[keys[i]] = true;\n  }\n\n  var result = [];\n  for (var j = 0; j < sel.length; j++) {\n    if (!keySet.hasOwnProperty(sel[j])) {\n      result.push(sel[j]);\n    } else {\n      keySet[sel[j]] = false;\n    }\n  }\n\n  for (var key in keySet) {\n    if (keySet[key]) {\n      result.push(key);\n    }\n  }\n\n  group.var(\"selection\").set(result);\n  return this;\n}\n"]}